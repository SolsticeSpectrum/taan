import { ProgressBar as CommonProgressBar } from "../common/slider.slint";

export component ProgressBar {
    pure function time-to-string(time: int) -> string {
        return Math.floor(time / 60000) + ":" + Math.floor(Math.mod(time / 1000, 60));
    }
    in-out property <int> current-time: 0;
    in-out property <int> music-duration: 0;
    property <float> progress: music-duration == 0 ? 0.0 : (current-time * 1.0) / music-duration;
    callback seek(int);
    // All functionality is now inherited from the common ProgressBar component
    VerticalLayout {
        padding-top: 16px;
        padding-bottom: 16px;
        CommonProgressBar {
            progress <=> root.progress;
            current-time: time-to-string(root.current-time);
            remaining-time: time-to-string(root.music-duration - root.current-time);
            seek(value) => {
                root.seek(value * root.music-duration);
            }
            moved(value) => {
                root.current-time = value * root.music-duration;
            }
        }
    }
}
