import { ProgressBar } from "progress_bar.slint";
import { VolumeSlider } from "volume_slider.slint";
import { SongInfo } from "song_info.slint";
import { MainControls } from "main_controls.slint";
import { AdditionalControls } from "additional_controls.slint";
import { AppState } from "../../state.slint";

export component PlayerControls inherits Rectangle {
    vertical-stretch: 0; // Fixed size, won't shrink
    
    VerticalLayout {
        alignment: LayoutAlignment.stretch;
        padding: 24px;
//        padding-top: 72px;
        spacing: 16px;
        // Volume control section
        volume-slider := VolumeSlider {
            volume <=> AppState.volume;
            volume-changed(value) => {
                AppState.volume-changed(value);
            }
        }
        
        // Song information section
        song-info := SongInfo {
            song-title: AppState.song-title;
            artist-name: AppState.artist-name;
            composer: AppState.composer;
        }
        
        // Main controls section  
        main-controls := MainControls {
            is-playing: AppState.is-playing;
            previous-clicked => {
                // AppState.previous-clicked();
            }
            play-pause-clicked => {
                if (AppState.is-playing) {
                    AppState.pause();
                } else {
                    AppState.play();
                }
            }
            next-clicked => {
                // AppState.next-clicked();
            }
        }
        
        
        // Progress bar section
        progress-bar := ProgressBar {
            progress <=> AppState.progress;
            current-time: AppState.current-time;
            remaining-time: AppState.remaining-time;
            seek(value) => {
                // AppState.seek(value);
            }
        }
        
        // Additional controls section
        additional-controls := AdditionalControls {
            stop-clicked => {
                // AppState.stop-clicked();
            }
            shuffle-clicked => {
                // AppState.shuffle-clicked();
            }
            repeat-clicked => {
                // AppState.repeat-clicked();
            }
            playlist-clicked => {
                // AppState.playlist-clicked();
            }
        }
    }
}
