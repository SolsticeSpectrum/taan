import { MusicPlayer } from "player.slint";
import { LoginWindow } from "login.slint";
import { CloseButton } from "components/common/close_button.slint";
import { Colors } from "components/common/colors.slint";
import "../resources/fonts/Inter-Regular.ttf";
import { AppState } from "state.slint";

export { AppState }

export component MainWindow inherits Window {
    title: "Taan";
    min-width: 300px;
    min-height: 400px;
    no-frame: true;
    resize-border-width: 4px;
    background: Colors.background-primary;
    default-font-family: "Inter";
    VerticalLayout {
        HorizontalLayout {
            TouchArea {
                moved => {
                    AppState.start-drag();
                }
            }

            close-button := CloseButton {
                close-clicked => {
                    AppState.close-window();
                }
            }
        }

        // Show appropriate view based on authentication state
    if !AppState.loggedIn: LoginWindow { }
        if AppState.loggedIn: MusicPlayer { }
    }
    
    // Initialize app on startup
    init => {
        AppState.initialize-app();
    }
}
