import { MusicPlayer } from "player.slint";
import { LoginWindow } from "login.slint";
import { CloseButton } from "components/common/close_button.slint";
import { Colors } from "components/common/colors.slint";
import "../resources/fonts/PaperMono-Regular.ttf";
import { WindowState, AuthenticationState } from "state.slint";
import { SavedTracks } from "tracks.slint";
export { PlayerState, WindowState, AuthenticationState, PlaylistsState, TracksState, Track } from "state.slint";
export { Utils } from "utils.slint";



export component MainWindow inherits Window {
    title: "Taan";
    min-width: 300px;
    min-height: 400px;
    no-frame: true;
    resize-border-width: 4px;
    background: Colors.background-primary;
    default-font-family: "Paper Mono";
    VerticalLayout {
        HorizontalLayout {
            TouchArea {
                moved => {
                    WindowState.start-drag();
                }
            }

            close-button := CloseButton {
                close-clicked => {
                    WindowState.close-window();
                }
            }
        }

        // Show appropriate view based on authentication state
        if !AuthenticationState.loggedIn: LoginWindow { }
        if AuthenticationState.loggedIn: SavedTracks { }
    }

    // Initialize app on startup
    init => {
        WindowState.initialize-app();
    }
}
